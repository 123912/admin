import{a$ as q,aM as J,Z as D,bI as U,D as N,aK as E,a5 as k,bJ as j,bK as G,aI as Q,bL as X,aJ as R,bp as h,b as O,d as M,a as ee,y as oe,q as S,aN as te,i as ne,a8 as F,aT as le,bM as ae,ay as I,r as v,bN as se,bO as ue,c as T,a6 as ce,ak as ie,o as de,a1 as re,A as P}from"./index-537f057f.js";import{P as x}from"./vnode-4c4dc2d3.js";const fe=(e,o={})=>{q(e)||J("[useLockscreen]","You need to pass a ref param to this function");const u=o.ns||D("popup"),t=U(()=>u.bm("parent","hidden"));if(!N||E(document.body,t.value))return;let c=0,s=!1,n="0";const d=()=>{setTimeout(()=>{R(document==null?void 0:document.body,t.value),s&&document&&(document.body.style.width=n)},200)};k(e,a=>{if(!a){d();return}s=!E(document.body,t.value),s&&(n=document.body.style.width),c=j(u.namespace.value);const f=document.documentElement.clientHeight<document.body.scrollHeight,r=G(document.body,"overflowY");c>0&&(f||r==="scroll")&&s&&(document.body.style.width=`calc(100% - ${c}px)`),Q(document.body,t.value)}),X(()=>d())},ye=e=>{if(!e)return{onClick:h,onMousedown:h,onMouseup:h};let o=!1,u=!1;return{onClick:n=>{o&&u&&e(n),o=u=!1},onMousedown:n=>{o=n.target===n.currentTarget},onMouseup:n=>{u=n.target===n.currentTarget}}},me=O({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:M([String,Array,Object])},zIndex:{type:M([String,Number])}}),ve={click:e=>e instanceof MouseEvent},be="overlay";var pe=ee({name:"ElOverlay",props:me,emits:ve,setup(e,{slots:o,emit:u}){const t=D(be),c=a=>{u("click",a)},{onClick:s,onMousedown:n,onMouseup:d}=ye(e.customMaskEvent?void 0:c);return()=>e.mask?oe("div",{class:[t.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:s,onMousedown:n,onMouseup:d},[S(o,"default")],x.STYLE|x.CLASS|x.PROPS,["onClick","onMouseup","onMousedown"]):te("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[S(o,"default")])}});const xe=pe,Ce=O({center:Boolean,alignCenter:Boolean,closeIcon:{type:ne},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),ke={close:()=>!0},Me=O({...Ce,appendToBody:Boolean,beforeClose:{type:M(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),Oe={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[F]:e=>le(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},we=(e,o)=>{const t=re().emit,{nextZIndex:c}=ae();let s="";const n=I(),d=I(),a=v(!1),f=v(!1),r=v(!1),b=v(e.zIndex||c());let y,m;const A=se("namespace",ue),z=T(()=>{const l={},i=`--${A.value}-dialog`;return e.fullscreen||(e.top&&(l[`${i}-margin-top`]=e.top),e.width&&(l[`${i}-width`]=ce(e.width))),l}),L=T(()=>e.alignCenter?{display:"flex"}:{});function $(){t("opened")}function V(){t("closed"),t(F,!1),e.destroyOnClose&&(r.value=!1)}function H(){t("close")}function w(){m==null||m(),y==null||y(),e.openDelay&&e.openDelay>0?{stop:y}=P(()=>B(),e.openDelay):B()}function p(){y==null||y(),m==null||m(),e.closeDelay&&e.closeDelay>0?{stop:m}=P(()=>g(),e.closeDelay):g()}function C(){function l(i){i||(f.value=!0,a.value=!1)}e.beforeClose?e.beforeClose(l):p()}function Y(){e.closeOnClickModal&&C()}function B(){N&&(a.value=!0)}function g(){a.value=!1}function K(){t("openAutoFocus")}function W(){t("closeAutoFocus")}function Z(l){var i;((i=l.detail)==null?void 0:i.focusReason)==="pointer"&&l.preventDefault()}e.lockScroll&&fe(a);function _(){e.closeOnPressEscape&&C()}return k(()=>e.modelValue,l=>{l?(f.value=!1,w(),r.value=!0,b.value=e.zIndex?b.value++:c(),ie(()=>{t("open"),o.value&&(o.value.scrollTop=0)})):a.value&&p()}),k(()=>e.fullscreen,l=>{o.value&&(l?(s=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=s)}),de(()=>{e.modelValue&&(a.value=!0,r.value=!0,w())}),{afterEnter:$,afterLeave:V,beforeLeave:H,handleClose:C,onModalClick:Y,close:p,doClose:g,onOpenAutoFocus:K,onCloseAutoFocus:W,onCloseRequested:_,onFocusoutPrevented:Z,titleId:n,bodyId:d,closed:f,style:z,overlayDialogStyle:L,rendered:r,visible:a,zIndex:b}};export{xe as E,ke as a,Me as b,Oe as c,Ce as d,ye as e,we as u};
