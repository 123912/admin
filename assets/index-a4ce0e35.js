import{b3 as p,a as B,r as y,O as F,o as O,f as T,s as j,j as g,y as e,w as t,R as m,t as z,k as i,a$ as V,F as A,b5 as E,S as D,U as N,V as R}from"./index-537f057f.js";import{E as I}from"./el-dialog-572bb7ad.js";import"./el-overlay-80a7d957.js";import{E as S,a as H,b as w}from"./el-table-column-efe7b014.js";/* empty css                   */import{E as G}from"./el-button-caa9e001.js";import"./refs-044d52ff.js";import"./vnode-4c4dc2d3.js";const J=()=>p.get("/admin/acl/permission"),K=d=>d.id?p.put("/admin/acl/permission/update",d):p.post("/admin/acl/permission/save",d),L=d=>p.delete("/admin/acl/permission/remove/"+d),Q={class:"dialog-footer"},oe=B({__name:"index",setup(d){let s=y(!1),a=F({code:"",level:0,name:"",pid:0}),f=y([]);O(()=>{c()});const c=async()=>{let o=await J();o.code==200&&(f.value=o.data)},C=o=>{Object.assign(a,{id:0,code:"",level:0,name:"",pid:0}),s.value=!0,a.level=o.level+1,a.pid=o.id},k=o=>{s.value=!0,Object.assign(a,o)},x=async()=>{(await K(a)).code==200&&(s.value=!1,E({type:"success",message:a.id?"更新成功":"添加成功"}),c())},P=async o=>{(await L(o)).code==200&&(E({type:"success",message:"删除成功"}),c())};return(o,n)=>{const u=S,r=G,$=H,M=w,_=D,b=N,U=R,q=I;return T(),j(A,null,[g("div",null,[e(M,{data:i(f),style:{width:"100%","margin-bottom":"20px"},"row-key":"id",border:""},{default:t(()=>[e(u,{label:"名称",prop:"name"}),e(u,{label:"权限值",prop:"code"}),e(u,{label:"修改时间",prop:"updateTime"}),e(u,{label:"操作"},{default:t(({row:l,$index:W})=>[e(r,{onClick:v=>C(l),type:"primary",size:"small",disabled:l.level==4},{default:t(()=>[m(z(l.level==3?"添加功能":"添加菜单"),1)]),_:2},1032,["onClick","disabled"]),e(r,{onClick:v=>k(l),type:"primary",size:"small",disabled:l.level==1},{default:t(()=>[m(" 编辑 ")]),_:2},1032,["onClick","disabled"]),e($,{title:`你确定要删除${l.name}?`,width:"260px",onConfirm:v=>P(l.id)},{reference:t(()=>[e(r,{type:"primary",size:"small",disabled:l.level==1},{default:t(()=>[m(" 删除 ")]),_:2},1032,["disabled"])]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"])]),e(q,{modelValue:i(s),"onUpdate:modelValue":n[3]||(n[3]=l=>V(s)?s.value=l:s=l),title:i(a).id?"编辑菜单":"添加菜单"},{footer:t(()=>[g("span",Q,[e(r,{onClick:n[2]||(n[2]=l=>V(s)?s.value=!1:s=!1)},{default:t(()=>[m("取消")]),_:1}),e(r,{type:"primary",onClick:x},{default:t(()=>[m("确定")]),_:1})])]),default:t(()=>[e(U,{model:i(a)},{default:t(()=>[e(b,{label:"名称"},{default:t(()=>[e(_,{placeholder:"请你输入菜单名称",modelValue:i(a).name,"onUpdate:modelValue":n[0]||(n[0]=l=>i(a).name=l)},null,8,["modelValue"])]),_:1}),e(b,{label:"权限"},{default:t(()=>[e(_,{placeholder:"请你输入权限数值",modelValue:i(a).code,"onUpdate:modelValue":n[1]||(n[1]=l=>i(a).code=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])],64)}}});export{oe as default};
